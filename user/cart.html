<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>TechSphere - Cart</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
			rel="stylesheet"
		/>
	</head>
	<body class="bg-gray-50 text-gray-900 font-sans">
		<!-- Navigation -->
		<nav class="fixed w-full top-0 z-50 bg-white shadow-sm">
			<div
				class="container mx-auto px-6 py-4 flex justify-between items-center"
			>
				<div class="flex items-center space-x-4">
					<img
						src="https://via.placeholder.com/40"
						alt="TechSphere Logo"
						class="rounded-full"
					/>
					<h1 class="text-2xl font-bold text-blue-600">TechSphere</h1>
				</div>

				<div class="flex items-center space-x-6">
					<a
						href="index.html"
						class="text-gray-700 hover:text-blue-600 transition-colors"
						>Home</a
					>
					<a
						href="products.html"
						class="text-gray-700 hover:text-blue-600 transition-colors"
						>Products</a
					>
					<a
						href="services.html"
						class="text-gray-700 hover:text-blue-600 transition-colors"
						>Services</a
					>
					<a href="#" class="text-blue-600 border-b-2 border-blue-600">Cart</a>

					<div class="relative">
						<button
							id="profileToggle"
							class="text-gray-700 hover:text-blue-600"
						>
							<i class="fas fa-user text-xl"></i>
						</button>

						<div
							id="profileDropdown"
							class="hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg"
						>
							<div class="py-1">
								<a
									href="#"
									class="block px-4 py-2 text-gray-700 hover:bg-blue-50"
								>
									<i class="fas fa-shopping-cart mr-2"></i>Cart
								</a>
								<a
									href="#"
									class="block px-4 py-2 text-gray-700 hover:bg-blue-50"
								>
									<i class="fas fa-list mr-2"></i>Orders
								</a>
								<a
									href="#"
									class="block px-4 py-2 text-gray-700 hover:bg-blue-50"
								>
									<i class="fas fa-cog mr-2"></i>Settings
								</a>
								<a
									href="#"
									class="block px-4 py-2 text-gray-700 hover:bg-blue-50"
								>
									<i class="fas fa-sign-out-alt mr-2"></i>Logout
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>

		<!-- Cart Section -->
		<div class="container mx-auto px-6 pt-24">
			<h1 class="text-4xl font-bold text-blue-600 mb-8">Your Shopping Cart</h1>

			<div class="grid md:grid-cols-3 gap-8">
				<!-- Cart Items -->
				<div class="md:col-span-2 space-y-6" id="cartItemsContainer">
					<!-- Cart items will be dynamically added here -->
				</div>

				<!-- Order Summary -->
				<div class="bg-white border border-gray-200 rounded-xl p-6 h-fit">
					<h3 class="text-2xl font-bold text-blue-600 mb-6">Order Summary</h3>

					<div class="space-y-4 mb-6">
						<div class="flex justify-between">
							<span>Subtotal</span>
							<span id="subtotalDisplay">$0.00</span>
						</div>
						<div class="flex justify-between">
							<span>Tax (10%)</span>
							<span id="taxDisplay">$0.00</span>
						</div>
						<div class="flex justify-between font-bold text-blue-600">
							<span>Total</span>
							<span id="totalDisplay">$0.00</span>
						</div>
					</div>

					<button
						class="w-full bg-blue-600 text-white py-3 rounded-full hover:bg-blue-700 transition-colors"
					>
						Proceed to Checkout
					</button>
				</div>
			</div>
		</div>

		<script>
			// Sample Product Data
			const products = [
				{
					id: 1,
					name: "Gaming Laptop",
					price: 1299.99,
					image: "https://via.placeholder.com/150",
					description: "High-performance gaming laptop with latest GPU",
				},
				{
					id: 2,
					name: "Wireless Router",
					price: 129.99,
					image: "https://via.placeholder.com/150",
					description: "High-speed dual-band WiFi router",
				},
				{
					id: 3,
					name: "External SSD",
					price: 199.99,
					image: "https://via.placeholder.com/150",
					description: "1TB portable solid-state drive",
				},
			];

			// Cart Management
			class CartManager {
				constructor() {
					this.items = JSON.parse(localStorage.getItem("cart")) || [];
					this.cartContainer = document.getElementById("cartItemsContainer");
					this.subtotalDisplay = document.getElementById("subtotalDisplay");
					this.taxDisplay = document.getElementById("taxDisplay");
					this.totalDisplay = document.getElementById("totalDisplay");
				}

				renderCart() {
					this.cartContainer.innerHTML = "";
					if (this.items.length === 0) {
						this.cartContainer.innerHTML = `
                    <div class="text-center py-12 bg-white rounded-xl">
                        <i class="fas fa-shopping-cart text-6xl text-gray-300 mb-4"></i>
                        <p class="text-xl text-gray-600">Your cart is empty</p>
                    </div>
                `;
					} else {
						this.items.forEach((item) => this.renderCartItem(item));
					}
					this.updateTotals();
				}

				renderCartItem(item) {
					const productDetails = products.find((p) => p.id === item.id);
					const cartItemElement = document.createElement("div");
					cartItemElement.classList.add(
						"bg-white",
						"border",
						"border-gray-200",
						"rounded-xl",
						"p-6",
						"flex",
						"items-center",
						"space-x-6"
					);
					cartItemElement.innerHTML = `
                <img src="${
									productDetails.image
								}" class="w-24 h-24 object-cover rounded-lg" />
                <div class="flex-grow">
                    <h4 class="text-xl font-bold">${productDetails.name}</h4>
                    <p class="text-gray-600">${productDetails.description}</p>
                    <div class="flex items-center space-x-4 mt-2">
                        <div class="flex items-center border rounded-full">
                            <button class="px-3 py-1 quantity-decrease" data-id="${
															item.id
														}">-</button>
                            <span class="px-3 quantity">${item.quantity}</span>
                            <button class="px-3 py-1 quantity-increase" data-id="${
															item.id
														}">+</button>
                        </div>
                        <button class="text-red-600 remove-item" data-id="${
													item.id
												}">Remove</button>
                    </div>
                </div>
                <span class="text-lg font-bold" id="itemTotal-${item.id}">$${(
						productDetails.price * item.quantity
					).toFixed(2)}</span>
            `;
					this.cartContainer.appendChild(cartItemElement);
				}

				updateTotals() {
					const subtotal = this.items.reduce((total, item) => {
						const product = products.find((p) => p.id === item.id);
						return total + product.price * item.quantity;
					}, 0);
					const tax = subtotal * 0.1;
					const total = subtotal + tax;

					this.subtotalDisplay.textContent = `$${subtotal.toFixed(2)}`;
					this.taxDisplay.textContent = `$${tax.toFixed(2)}`;
					this.totalDisplay.textContent = `$${total.toFixed(2)}`;
				}

				addToCart(productId) {
					const existingItem = this.items.find((item) => item.id === productId);
					if (existingItem) {
						existingItem.quantity++;
					} else {
						this.items.push({ id: productId, quantity: 1 });
					}
					this.saveCart();
					this.renderCart();
				}

				removeFromCart(productId) {
					this.items = this.items.filter((item) => item.id !== productId);
					this.saveCart();
					this.renderCart();
				}

				changeQuantity(productId, change) {
					const item = this.items.find((item) => item.id === productId);
					if (item) {
						item.quantity += change;
						if (item.quantity <= 0) {
							this.removeFromCart(productId);
						} else {
							this.saveCart();
							this.renderCart();
						}
					}
				}

				saveCart() {
					localStorage.setItem("cart", JSON.stringify(this.items));
				}
			}

			// Profile Dropdown Script
			document
				.getElementById("profileToggle")
				.addEventListener("click", function () {
					const dropdown = document.getElementById("profileDropdown");
					dropdown.classList.toggle("hidden");
				});

			window.addEventListener("click", function (event) {
				const dropdown = document.getElementById("profileDropdown");
				if (!event.target.closest("#profileToggle")) {
					dropdown.classList.add("hidden");
				}
			});

			// Initialize Cart
			const cartManager = new CartManager();
			cartManager.renderCart();

			// Event Delegation for Cart Actions
			document
				.getElementById("cartItemsContainer")
				.addEventListener("click", (event) => {
					const target = event.target;
					const productId = parseInt(target.getAttribute("data-id"));

					if (target.classList.contains("remove-item")) {
						cartManager.removeFromCart(productId);
					} else if (target.classList.contains("quantity-increase")) {
						cartManager.changeQuantity(productId, 1);
					} else if (target.classList.contains("quantity-decrease")) {
						cartManager.changeQuantity(productId, -1);
					}
				});

			// Sample adding items to cart for demonstration
			cartManager.addToCart(1);
			cartManager.addToCart(2);
			cartManager.addToCart(3);
		</script>
	</body>
</html>
